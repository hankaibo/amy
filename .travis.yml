language: node_js
node_js:
  - '10'

cache:
  yarn: true
  directories:
    - node_modules

before_install:
  - openssl aes-256-cbc -K $encrypted_65f6a220a07e_key -iv $encrypted_65f6a220a07e_iv
    -in travis.enc -out ~/.ssh/travis -d
  - chmod 600 ~/.ssh/travis

addons:
  ssh_known_hosts: "$IP"

branches:
  only:
    - master

install: yarn

script:
  - echo $KNOWN_HOST >> ~/.ssh/known_hosts
  - yarn run build

after_success:
  - cd dist
  - scp -o StrictHostKeyChecking=no -r ./* ubuntu@$IP:/var/www/html/myantdpro
